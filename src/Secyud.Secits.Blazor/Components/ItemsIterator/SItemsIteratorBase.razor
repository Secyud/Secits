@namespace Secyud.Secits.Blazor.Components
@inherits ScBusinessBase
@typeparam TItem

@{
    base.BuildRenderTree(__builder);
}

@code
{
    protected override RenderFragment GenerateChildContent() => __builder =>
    {
        @GenerateHeader()
        @GenerateIterator()
        @GenerateFooter()
    };

    protected virtual RenderFragment GenerateHeader() => __builder =>
    {
        foreach (var header in Headers)
        {
            @header.GenerateHeader()
        }
    };

    protected virtual RenderFragment GenerateFooter() => __builder =>
    {
        foreach (var footer in Footers)
        {
            @footer.GenerateFooter()
        }
    };

    protected virtual RenderFragment GenerateIterator() => __builder =>
    {
        @ItemsRenderer.Get()?.GenerateItems(GenerateRow())
    };

    protected virtual RenderFragment<TItem> GenerateRow() => item => __builder =>
    {
        @RowRenderer.Get()?.GenerateRow(item,GenerateCol())
    };

    protected abstract RenderFragment<TItem> GenerateCol();
}